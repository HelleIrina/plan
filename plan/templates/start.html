{% extends "base.html" %}
{% load color %}
{% load strip %}

{% block hd %}
    <h1>unofficial timetable generator for NTNU students</h1>
{% endblock %}

{% block onload %}onload="{% stripspace %}
    var s = document.getElementById('s');

    if (s) {
        s.focus();

        if (document.cookie) {
            var last = document.cookie.match(/last=([a-z0-9_-]+)/);

            if (s.value)
                return;

            if (last)
                s.value = last[1];
        }
    }
{% endstripspace %}"{% endblock %}

{% block bd %}
    {% if missing %}
        <div id="help" class="large">
            <p>
                Sorry, no semesters have been loaded yet.
            </p>
        </div>
    {% else %}
        <div class="yui-g">
            <div class="yui-u first">
                <h2>Getting started</h2>
                <div id="help">
                    <form action="{% url frontpage %}" method="post">
                        <p class="large">
                            Please enter a short name identifying your personal
                            timetable, ie. username, nickname etc. If the name
                            you select is in already taken, choose another
                            one.
                        </p>
                        <p class="right">
                            {{ schedule_form.semester }}
                            {{ schedule_form.slug }}
                            <button type="submit"><span class="icon start">Start</span></button>
                        </p>
                    </form>
                </div>
                <p>
                    To retrieve your timetable simply enter the same identifier
                    you used last time.
                </p>
                {% include "notice.html" %}
                {# {% include "statistics.html" %} #}
            </div>
            <div class="yui-u">
                <h2>Top {{ limit }} courses {{ current }}</h2>
                {% if stats %}
                    <div id="stats">
                        {% for count,name,full_name in stats %}
                            <div title="{{ full_name }}" style="width: {% widthratio count stats.0.0 95 %}%" class="{% color name %}">
                                <span>{{ count }}</span>
                                {{ name }}
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    No coures have been added to any schedules yet.
                {% endif %}
            </div>
        </div>
        <h2>Disclaimer</h2>
        <p>
            This site is <b>not</b> run by NTNU and is not hosted on any of
            their servers.
        </p>
        <p>
            All course and exam data is retrived from NTNU's public sites.
            All deadlines have been added manualy by users. Please note that
            the course data displayed on this site can be out of sync with
            NTNU if they make changes to their schedules.
        </p>
    {% endif %}
{% endblock %}
