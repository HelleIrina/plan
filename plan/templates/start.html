{% extends "base_site.html" %}

{% load color %}
{% load compress %}
{% load strip %}
{% load i18n %}

{% block hd %}
  <h1>
    {% blocktrans with INSTITUTION as institution %}
      Timetable generator for {{ institution }} students
    {% endblocktrans %}
  </h1>
{% endblock %}

{% block extrascript %}
  <script type="text/javascript">
    // To keep frontpage minimal we don't have jquery available.
    // Simple onload fallback instead of DOMContentLoaded +
    // onreadystatechange is deliberate.
    window.onload = function() {
      var s = document.getElementById('s'),
          f = document.getElementById('f');
      s.focus();
      if (window.localStorage) {
        s.value = localStorage.getItem('last');
        f.onsubmit = function() {
          localStorage.setItem('last', s.value);
        }
      }
    };
  </script>
{% endblock %}

{% block extrastyle %}
  {% if stats %}
    {% compress css inline %}
      <style type="text/css">
        {% for count,course_id,code,name in stats %}
          .course-{{ course_id }} {
            background-color: {% color course_id %};
          }
        {% endfor %}
      </style>
    {% endcompress %}
  {% endif %}
{% endblock %}

{% block bd %}
  <div class="yui-g">
    <div class="yui-u first">
      <h2>{% trans "Getting started" %}</h2>
      <div id="help">
        <form action="." method="post" id="f">
          <p class="large">
            {% blocktrans %}
              Please enter a short name identifying your personal
              timetable, ie. username, nickname etc. If the name
              you select is in already taken, choose another
              one.
            {% endblocktrans %}
          </p>
          <p class="right">
            {{ schedule_form.semester }}
            {{ schedule_form.slug }}
            <button type="submit">{% trans "Start" %} <i class="icon-arrow-right"></i></button>
          </p>
        </form>
      </div>
      <p>
        {% blocktrans %}
          To retrieve your timetable simply enter the same identifier
          you used last time.
        {% endblocktrans %}
      </p>
      {% include "notice.html" %}
      {% include "statistics.html" %}
    </div>
    <div class="yui-u">
      <h2>
        {% blocktrans %}
          Top {{ limit }} courses {{ current }}
        {% endblocktrans %}
      </h2>
      {% if stats %}
        <div id="stats">
          {% for count,course_id,code,name in stats %}
            <div title="{{ name }}" style="width: {% widthratio count stats.0.0 95 %}%" class="course-{{ course_id }}">
              <span>{{ count }}</span>
              {{ code }}
            </div>
          {% endfor %}
        </div>
      {% else %}
        {% trans "No courses have been added to any schedules yet." %}
      {% endif %}
    </div>
  </div>
{% endblock %}
