{% extends "base_site.html" %}

{% load color %}
{% load compress %}
{% load i18n %}
{% load json %}
{% load static %}

{% block title %}
  {# {% trans "About the Timetable generator for NTNU students" %} #}
  {% trans "Number of timetables" %}
{% endblock %}

{% block lang %}
{% endblock %}

{% block hd %}
  <h1>
    {# {% trans "About the Timetable generator for NTNU students" %} #}
    {% trans "Number of timetables over time" %}
  </h1>
{% endblock %}

{% block extrascript %}
  {% compress js %}
    <script type="text/javascript" src="{% static 'js/jquery-1.7.2.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery.flot.min.js' %}"></script>
  {% endcompress %}
{% endblock %}

{% block extrahead %}
  {{ block.super }}
  <!--[if IE]><script language="javascript" type="text/javascript" src="{% static 'js/excanvas.min.js' %}"></script><![endif]-->
{% endblock %}

{% block bd %}
{% comment %}
  <div class="yui-gb">
    <div class="yui-u first">
      <h2>Fall 2008</h2>
      <p>Lorem ipsum dolor sit amet...</p>
    </div>
    <div class="yui-u">
      <h2>Summer 2009</h2>
      <p>Lorem ipsum dolor sit amet...</p>
    </div>
    <div class="yui-u">
      <h2>2010&hellip;</h2>
      <p>Lorem ipsum dolor sit amet...</p>
    </div>
  </div>
{% endcomment %}

  {# <h2>Timetables per semester</h2> #}
  <div id="graph" style="width: 100%; height: 25em">
  </div>

  {% compress js inline %}
    <script type="text/javascript">
      (function() {
        var data = {{ data|json }};
        var fills = [];
        {% for a in data %}
        fills.push("{% color forloop.counter %}");{% endfor %}

        var plot = function() {
          var series = [];
          var options = {
            xaxis: { mode: "time" },
            yaxis: { min: 0 }
          };
          var fill;

          for (var i = 0; i < data.length; i++) {
            fill = $.color.parse(fills[i]).scale('a', 0.5);
            series.push({
              data: data[i],
              lines: {
                show: true,
                lineWidth: 1,
                fill: true,
                fillColor: fill.toString()
              },
              color: "#333"
            });
          }

          $.plot($('#graph'), series, options);
        };

	// Arrange callback once all async js loads are done, dom ready would
	// be to soon due to async loading of jquery etc.
        if (window.addEventListener)
          window.addEventListener('load', plot, false);
        else
          window.attachEvent('onload', plot);
      })();
    </script>
  {% endcompress %}
{% endblock %}
